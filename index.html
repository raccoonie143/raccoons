<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Raccoon Reverie | A Midnight Adventure of Words</title>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        .icon-custom {
            width: 1em; height: 1em; display: inline-block; vertical-align: middle; margin-right: 0.3em;
            fill: currentColor;
            transition: transform 0.2s ease-out;
        }

        .btn .icon-custom, nav a .icon-custom {
            transform-origin: center center;
        }

        .btn:hover .icon-custom, nav a:hover .icon-custom {
            transform: scale(1.1);
        }

        :root {
            --primary-light: #6A5ACD;
            --secondary-light: #9370DB;
            --tertiary-light: #E0E0EB;
            --background-light: #F7F7FA;
            --text-light: #303030;
            --card-light: #FFFFFF;
            --border-light: #D5D5E0;
            --glow-light: rgba(106, 90, 205, 0.4);
            --hero-bg-light: radial-gradient(circle at 80% 20%, var(--tertiary-light) 0%, var(--background-light) 70%);

            --primary-dark: #A36BFF;
            --secondary-dark: #C67AFF;
            --tertiary-dark: #3F3C5E;
            --background-dark: #20202F;
            --text-dark: #E0E0E0;
            --card-dark: #2B2B3E;
            --border-dark: #5A5A70;
            --glow-dark: rgba(163, 107, 255, 0.4);
            --hero-bg-dark: radial-gradient(circle at 20% 80%, var(--tertiary-dark) 0%, var(--background-dark) 70%);

            --shadow-light: 0 8px 20px rgba(0,0,0,0.08);
            --shadow-dark: 0 8px 20px rgba(0,0,0,0.25);

            --transition-speed: 0.7s cubic-bezier(0.4, 0, 0.2, 1);
            --hover-scale: 1.03;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Lato', sans-serif;
            background: var(--background-light);
            color: var(--text-light);
            line-height: 1.7;
            transition: background var(--transition-speed), color var(--transition-speed);
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
        }

        body.dark {
            background: var(--background-dark);
            color: var(--text-dark);
        }

        #scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 4px;
            background: var(--secondary-light);
            z-index: 1000;
            transition: background var(--transition-speed);
            border-radius: 0 4px 4px 0;
        }

        body.dark #scroll-progress {
            background: var(--secondary-dark);
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .text-center {
            text-align: center;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        header {
            background: var(--card-light);
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow-light);
            position: sticky;
            top: 0;
            z-index: 100;
            transition: background var(--transition-speed), box-shadow var(--transition-speed);
            flex-wrap: wrap;
        }

        body.dark header {
            background: var(--card-dark);
            box-shadow: var(--shadow-dark);
        }

        header h1 {
            font-family: 'Merriweather', serif;
            font-size: 2.2rem;
            color: var(--primary-light);
            margin: 0;
            letter-spacing: 0.03em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.05);
            transition: color var(--transition-speed);
            position: relative;
            cursor: pointer;
            user-select: none;
            padding-right: 20px;
        }

        body.dark header h1 {
            color: var(--primary-dark);
        }

        header h1::before {
            content: 'ü¶ù';
            position: absolute;
            left: -0.8em;
            top: 50%;
            transform: translateY(-50%) rotate(0deg);
            transition: transform 0.3s ease-out;
            font-size: 0.8em;
        }

        header h1:hover::before {
            transform: translateY(-50%) rotate(15deg) scale(1.1);
        }

        @keyframes headerWiggle {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
        }
        @keyframes fadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }

        nav {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        nav a {
            text-decoration: none;
            color: var(--text-light);
            font-weight: 400;
            position: relative;
            transition: color 0.3s ease, transform 0.2s ease;
            display: inline-flex;
            align-items: center;
            padding: 0.2rem 0;
        }

        body.dark nav a {
            color: var(--text-dark);
        }

        nav a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 0;
            background-color: var(--primary-light);
            transition: width 0.3s ease-out;
            border-radius: 1px;
        }

        body.dark nav a::after {
            background-color: var(--primary-dark);
        }

        nav a:hover {
            color: var(--primary-light);
            transform: translateY(-1px);
        }

        body.dark nav a:hover {
            color: var(--primary-dark);
        }

        nav a:hover::after {
            width: 100%;
        }

        .theme-toggle {
            background: none;
            border: none;
            font-size: 1.4rem;
            cursor: pointer;
            color: var(--primary-light);
            transition: transform 0.3s ease, color 0.3s ease;
            margin-left: 1rem;
            outline: none;
            position: relative;
        }

        body.dark .theme-toggle {
            color: var(--primary-dark);
        }

        .theme-toggle:hover {
            transform: scale(1.1) rotate(10deg);
        }

        .hero {
            background: var(--hero-bg-light);
            padding: 4rem 2rem;
            border-radius: 1.5rem;
            box-shadow: var(--shadow-light);
            text-align: center;
            margin-top: 1.5rem;
            position: relative;
            overflow: hidden;
            animation: fadeIn 1s ease-out;
            transition: background var(--transition-speed), box-shadow var(--transition-speed);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        body.dark .hero {
            background: var(--hero-bg-dark);
            box-shadow: var(--shadow-dark);
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -25%;
            left: -25%;
            width: 150%;
            height: 150%;
            background: radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.05) 0%, transparent 70%);
            animation: rotateBackground 35s linear infinite;
        }

        @keyframes rotateBackground {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .hero h2 {
            font-family: 'Merriweather', serif;
            font-size: 2.8rem;
            color: var(--primary-light);
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
            transition: color var(--transition-speed);
            animation: textPop 0.8s ease-out;
            line-height: 1.2;
        }

        body.dark .hero h2 {
            color: var(--primary-dark);
        }

        @keyframes textPop {
            0% { opacity: 0; transform: scale(0.9); }
            100% { opacity: 1; transform: scale(1); }
        }

        .hero p {
            font-size: 1.1rem;
            max-width: 700px;
            margin: 0 auto 1.5rem;
            line-height: 1.7;
            position: relative;
            z-index: 1;
            opacity: 0;
            animation: fadeIn 1s 0.3s forwards;
        }

        .hero .buttons {
            display: flex;
            justify-content: center;
            gap: 1.2rem;
            margin-top: 2rem;
            position: relative;
            z-index: 1;
            opacity: 0;
            animation: fadeIn 1s 0.6s forwards;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.8rem 1.8rem;
            border-radius: 30px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            white-space: nowrap;
            overflow: hidden;
            position: relative;
            z-index: 1;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.1);
            transition: left 0.3s ease-out;
            z-index: -1;
            transform: skewX(-15deg);
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: var(--primary-light);
            color: white;
            border: 2px solid var(--primary-light);
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        body.dark .btn-primary {
            background: var(--primary-dark);
            border-color: var(--primary-dark);
        }

        .btn-primary:hover {
            transform: translateY(-3px) scale(var(--hover-scale));
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
            filter: brightness(1.1);
        }

        .btn-outline {
            background: transparent;
            color: var(--primary-light);
            border: 2px solid var(--primary-light);
        }

        body.dark .btn-outline {
            color: var(--primary-dark);
            border-color: var(--primary-dark);
        }

        .btn-outline:hover {
            transform: translateY(-3px) scale(var(--hover-scale));
            background: var(--primary-light);
            color: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        body.dark .btn-outline:hover {
            background: var(--primary-dark);
        }

        .hero img {
            width: 200px;
            height: auto;
            max-width: 100%;
            object-fit: contain;
            margin-top: 2.5rem;
            animation: float 4s ease-in-out infinite, subtleGlow 2.5s ease-in-out infinite alternate;
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.08));
            position: relative;
            z-index: 1;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes subtleGlow {
            0%, 100% { filter: drop-shadow(0 5px 10px rgba(0,0,0,0.08)); }
            50% { filter: drop-shadow(0 8px 18px var(--glow-light)); }
        }

        body.dark @keyframes subtleGlow {
            0%, 100% { filter: drop-shadow(0 5px 10px rgba(0,0,0,0.08)); }
            50% { filter: drop-shadow(0 8px 18px var(--glow-dark)); }
        }

        .section-title {
            font-family: 'Merriweather', serif;
            font-size: 2.3rem;
            color: var(--primary-light);
            margin-top: 4rem;
            margin-bottom: 2rem;
            position: relative;
            display: inline-block;
            transition: color var(--transition-speed);
            line-height: 1.2;
            padding-bottom: 8px;
        }

        body.dark .section-title {
            color: var(--primary-dark);
        }

        .section-title::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: 0;
            transform: translateX(-50%) skewX(-5deg);
            width: 60%;
            max-width: 250px;
            height: 3px;
            background: var(--secondary-light);
            border-radius: 2px;
            transition: background var(--transition-speed), width 0.3s ease-out;
        }

        body.dark .section-title::after {
            background: var(--secondary-dark);
        }

        .section-title:hover::after {
            width: 70%;
        }

        .facts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2.5rem;
            padding: 1rem;
            justify-content: center;
        }

        .fact-card {
            background: var(--card-light);
            border-radius: 1.5rem;
            box-shadow: var(--shadow-light);
            padding: 1.8rem;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease, background var(--transition-speed);
            position: relative;
            overflow: hidden;
            border: 1px solid var(--border-light);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }

        body.dark .fact-card {
            background: var(--card-dark);
            box-shadow: var(--shadow-dark);
            border-color: var(--border-dark);
        }

        .fact-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, var(--secondary-light) 0%, transparent 70%);
            opacity: 0.05;
            transition: opacity 0.3s ease;
            z-index: 0;
            border-radius: 1.5rem;
        }

        body.dark .fact-card::before {
            background: linear-gradient(45deg, var(--secondary-dark) 0%, transparent 70%);
        }

        .fact-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 12px 25px rgba(0,0,0,0.15);
        }

        .fact-card:hover::before {
            opacity: 0.15;
        }

        .fact-card strong {
            font-family: 'Merriweather', serif;
            font-size: 1.6rem;
            color: var(--primary-light);
            margin-bottom: 0.8rem;
            transition: color var(--transition-speed);
            position: relative;
            z-index: 1;
            line-height: 1.3;
        }

        body.dark .fact-card strong {
            color: var(--primary-dark);
        }

        .fact-card strong::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: -5px;
            transform: translateX(-50%);
            width: 50px;
            height: 2px;
            background: var(--secondary-light);
            border-radius: 1px;
            opacity: 0.7;
            transition: background 0.3s ease;
        }

        body.dark .fact-card strong::after {
            background: var(--secondary-dark);
        }

        .fact-card .fact-content {
            height: 0;
            opacity: 0;
            overflow: hidden;
            transition: height 0.5s ease-out, opacity 0.5s ease-out;
            padding-top: 0.5rem;
            box-sizing: border-box;
            color: var(--text-light);
            font-size: 1rem;
            line-height: 1.6;
            width: 100%;
            position: relative;
            z-index: 1;
        }

        body.dark .fact-card .fact-content {
            color: var(--text-dark);
        }

        .fact-card.revealed .fact-content {
            height: auto;
            opacity: 1;
        }

        .fact-card .tap-to-reveal-text {
            font-size: 0.9rem;
            color: var(--text-light);
            opacity: 0.7;
            margin-top: 1rem;
            transition: opacity 0.3s ease;
            position: relative;
            z-index: 1;
        }
        body.dark .fact-card .tap-to-reveal-text {
             color: var(--text-dark);
        }

        .fact-card.revealed .tap-to-reveal-text {
            opacity: 0;
            height: 0;
            overflow: hidden;
        }

        .joke-section {
            background: var(--tertiary-light);
            color: var(--text-light);
            padding: 2.5rem;
            border-radius: 1.5rem;
            max-width: 800px;
            margin: 4rem auto;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-light);
            transition: background var(--transition-speed), color var(--transition-speed), box-shadow var(--transition-speed);
            border: 1px dashed var(--secondary-light);
        }

        body.dark .joke-section {
            background: var(--tertiary-dark);
            color: var(--text-dark);
            box-shadow: var(--shadow-dark);
            border-color: var(--secondary-dark);
        }

        .joke-section h3 {
            font-family: 'Merriweather', serif;
            font-size: 2rem;
            color: var(--primary-light);
            margin-bottom: 1.2rem;
            transition: color var(--transition-speed);
            position: relative;
            display: inline-block;
        }

        body.dark .joke-section h3 {
            color: var(--primary-dark);
        }

        .joke-section h3::after {
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            bottom: -3px;
            height: 1px;
            background: var(--secondary-light);
            transform: scaleX(0);
            transform-origin: center;
            transition: transform 0.3s ease-out;
        }

        .joke-section h3:hover::after {
            transform: scaleX(1);
        }

        .joke-section p#joke {
            font-family: 'Lato', sans-serif;
            font-size: 1.2rem;
            font-style: italic;
            margin-bottom: 1.8rem;
            min-height: 3.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            text-shadow: 0 1px 1px rgba(0,0,0,0.03);
            transition: opacity 0.3s ease, transform 0.3s ease;
            color: var(--text-light);
            padding: 0 1rem;
        }

        body.dark .joke-section p#joke {
             color: var(--text-dark);
        }

        .joke-section p#joke.fade-out {
            opacity: 0;
            transform: translateY(-10px);
        }
        .joke-section p#joke.fade-in {
            opacity: 1;
            transform: translateY(0);
        }

        .joke-section button {
            background: var(--secondary-light);
            color: white;
            padding: 0.7rem 1.6rem;
            border-radius: 30px;
            border: none;
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
        }

        body.dark .joke-section button {
            background: var(--secondary-dark);
        }

        .joke-section button:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            filter: brightness(1.1);
        }
        .joke-section button:active {
            transform: translateY(1px) scale(0.98);
        }

        .sparkle {
            position: absolute;
            background: radial-gradient(circle, var(--primary-light) 10%, rgba(255,255,255,0.6) 40%, transparent 70%);
            border-radius: 50%;
            animation: sparkle-anim 0.9s ease-out forwards;
            pointer-events: none;
            opacity: 0;
            transform-origin: center center;
            z-index: 2;
        }

        body.dark .sparkle {
            background: radial-gradient(circle, var(--primary-dark) 10%, rgba(255,255,255,0.6) 40%, transparent 70%);
        }

        @keyframes sparkle-anim {
            0% { opacity: 1; transform: scale(0.1) rotate(0deg); }
            50% { opacity: 1; transform: scale(1.5) rotate(180deg); }
            100% { opacity: 0; transform: scale(2.5) rotate(360deg); }
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: var(--secondary-light);
            border-radius: 50%;
            animation: confetti-fall 2s ease-out forwards;
            opacity: 0;
            pointer-events: none;
            z-index: 2;
        }
        body.dark .confetti {
            background-color: var(--secondary-dark);
        }

        @keyframes confetti-fall {
            0% { transform: translateY(0) rotate(0deg) scale(0.5); opacity: 1; }
            100% { transform: translateY(200px) rotate(720deg) scale(1); opacity: 0; }
        }


        .theme-circle {
            position: fixed;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: var(--primary-light);
            z-index: 999;
            pointer-events: none;
            transition: width 0.7s cubic-bezier(0.7, 0, 0.3, 1), height 0.7s cubic-bezier(0.7, 0, 0.3, 1);
            transform: translate(-50%, -50%);
        }

        body.animating .theme-circle {
            width: 250vmax;
            height: 250vmax;
        }

        footer {
            margin-top: 3rem;
            padding: 1.5rem 1rem;
            text-align: center;
            background: var(--card-light);
            box-shadow: 0 -1px 8px rgba(0,0,0,0.05);
            font-size: 0.85rem;
            color: var(--text-light);
            transition: background var(--transition-speed), color var(--transition-speed), box-shadow var(--transition-speed);
        }

        body.dark footer {
            background: var(--card-dark);
            color: var(--text-dark);
            box-shadow: 0 -1px 8px rgba(0,0,0,0.1);
        }

        footer p {
            margin: 0;
            line-height: 1.6;
        }

        .ambient-particle {
            position: absolute;
            pointer-events: none;
            opacity: 0;
            z-index: 5;
            animation-iteration-count: infinite;
            animation-fill-mode: forwards;
        }

        .dust-mote {
            background-color: rgba(180, 180, 180, 0.15);
            border-radius: 50%;
            animation-name: floatAndFade;
        }

        @keyframes floatAndFade {
            0% { transform: translateY(-50px) translateX(var(--x-start, 0)); opacity: 0; }
            10% { opacity: 0.5; }
            90% { opacity: 0.5; }
            100% { transform: translateY(calc(100vh + 50px)) translateX(var(--x-end, 0)); opacity: 0; }
        }

        .twinkle-star {
            background: var(--secondary-dark);
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 67% 57%, 78% 91%, 50% 70%, 22% 91%, 33% 57%, 2% 35%, 39% 35%);
            animation-name: twinklePulse;
        }

        @keyframes twinklePulse {
            0%, 100% { opacity: 0.6; transform: scale(0.9) rotate(0deg); }
            50% { opacity: 1; transform: scale(1.1) rotate(360deg); }
        }

        @media (max-width: 768px) {
            header {
                flex-direction: column;
                padding: 0.8rem 1rem;
            }

            header h1 {
                margin-bottom: 0.8rem;
                font-size: 1.8rem;
            }

            header h1::before {
                left: -0.9em;
                font-size: 0.7em;
            }

            nav {
                gap: 0.8rem;
            }

            nav a, .theme-toggle {
                margin: 0 0.4rem;
            }
            .theme-toggle {
                font-size: 1.2rem;
            }

            .hero {
                padding: 3rem 1rem;
                margin-top: 1rem;
            }

            .hero h2 {
                font-size: 2.2rem;
            }

            .hero p {
                font-size: 1rem;
            }

            .hero .buttons {
                flex-direction: column;
                gap: 0.8rem;
            }

            .btn {
                width: 90%;
                max-width: 300px;
                margin: 0 auto;
                font-size: 0.9rem;
                padding: 0.7rem 1.5rem;
            }

            .hero img {
                width: 150px;
                margin-top: 1.5rem;
            }

            .section-title {
                font-size: 1.8rem;
                margin-top: 3rem;
                margin-bottom: 1.5rem;
            }

            .facts-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
                padding: 0.5rem;
            }

            .fact-card {
                padding: 1.5rem;
            }

            .fact-card strong {
                font-size: 1.5rem;
            }

            .fact-card p {
                font-size: 0.95rem;
            }

            .joke-section {
                padding: 2rem;
                margin: 3rem auto;
            }

            .joke-section h3 {
                font-size: 1.6rem;
            }

            .joke-section p#joke {
                font-size: 1.1rem;
                min-height: 3rem;
            }

            .joke-section button {
                padding: 0.6rem 1.4rem;
                font-size: 0.85rem;
            }

            footer {
                margin-top: 2rem;
                padding: 1.2rem 0.8rem;
            }
        }

        @media (max-width: 480px) {
            header h1 {
                font-size: 1.5rem;
                padding-right: 15px;
            }
            header h1::before {
                left: -1em;
                font-size: 0.6em;
            }
            nav {
                width: 100%;
                margin-top: 0.5rem;
            }
            nav a, .theme-toggle {
                margin: 0 0.3rem;
                font-size: 0.9rem;
            }
            .theme-toggle {
                font-size: 1rem;
            }

            .hero h2 {
                font-size: 2rem;
            }
            .hero p {
                font-size: 0.9rem;
            }
            .btn {
                font-size: 0.85rem;
                padding: 0.6rem 1.2rem;
            }
            .section-title {
                font-size: 1.5rem;
            }
            .fact-card strong {
                font-size: 1.3rem;
            }
            .fact-card p {
                font-size: 0.9rem;
            }
            .joke-section h3 {
                font-size: 1.4rem;
            }
            .joke-section p#joke {
                font-size: 1rem;
            }
            .joke-section button {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div id="scroll-progress"></div>
    <div class="theme-circle" id="themeCircle"></div>

    <header>
        <h1 onclick="raccoonHeaderWiggle()">Raccoon Reverie</h1>
        <nav>
            <a href="#"><svg class="icon-custom" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>Home</a>
            <a href="#facts-section"><svg class="icon-custom" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>Facts</a>
            <a href="quiz.html"><svg class="icon-custom" viewBox="0 0 24 24"><path d="M17.5 13.5c-.32 0-.64-.09-.92-.25l-.94-.52c-.67-.37-1.52-.37-2.19 0l-.94.52c-.56.3-.92.52-1.31.52-.39 0-.75-.22-1.31-.52l-.94-.52c-.67-.37-1.52-.37-2.19 0l-.94.52c-.32.16-.64.25-.92.25-.93 0-1.62-1.28-1.62-2.58C4 8.76 6.64 6 10 6s6 2.76 6 6c0 1.3-.69 2.58-1.62 2.58zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>Quiz</a>
            <a href="about.html"><svg class="icon-custom" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>About</a>
            <button class="theme-toggle" onclick="toggleTheme(event)" id="themeToggle" aria-label="Toggle light and dark theme">üåô<span class="sr-only">Dark mode</span></button>
        </nav>
    </header>

    <main class="container">
        <section class="hero">
            <h2>Embark on a Midnight Scavenger Hunt with Raccoons!</h2>
            <p>Beneath the moonlit canopy, curious paws stir. Welcome, adventurer, to Raccoon Reverie ‚Äì your secret guide to the whimsical, often surprising, and always adorable world of nature's masked marvels. Are you ready to unearth some hidden gems?</p>
            <div class="buttons">
                <a href="#facts-section" class="btn btn-primary">
                    <svg class="icon-custom" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg> Discover Enchanting Facts
                </a>
                <a href="quiz.html" class="btn btn-outline">
                    <svg class="icon-custom" viewBox="0 0 24 24"><path d="M17.5 13.5c-.32 0-.64-.09-.92-.25l-.94-.52c-.67-.37-1.52-.37-2.19 0l-.94.52c-.56.3-.92.52-1.31.52-.39 0-.75-.22-1.31-.52l-.94-.52c-.67-.37-1.52-.37-2.19 0l-.94.52c-.32.16-.64.25-.92.25-.93 0-1.62-1.28-1.62-2.58C4 8.76 6.64 6 10 6s6 2.76 6 6c0 1.3-.69 2.58-1.62 2.58zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg> Test Your Raccoon IQ
                </a>
            </div>
            <img src="https://mystickermania.com/cdn/stickers/animals/raccoon-sitting-512x512.png" alt="A cute animated raccoon sitting and looking curious" />
        </section>

        <section id="facts-section">
            <h2 class="section-title text-center">Unearthing Raccoon Revelations</h2>
            <p class="text-center" style="max-width: 650px; margin: 1rem auto 2.5rem; font-size: 1rem; color: var(--text-light); transition: color var(--transition-speed);">Join us on a nocturnal journey to discover the incredible secrets of these masked masters of mischief. Each card holds a fascinating tidbit!</p>

            <div class="facts-grid">
                <div class="fact-card" onclick="toggleFact(this)">
                    <strong>The Clever Connoisseurs</strong>
                    <div class="fact-content">
                        <p>Raccoons possess an astonishing memory, capable of remembering solutions to tasks for over three years! Their problem-solving skills are top-tier, making them surprisingly adaptable.</p>
                    </div>
                    <span class="tap-to-reveal-text">Tap to Reveal!</span>
                </div>
                <div class="fact-card" onclick="toggleFact(this)">
                    <strong>Paws of Perception</strong>
                    <div class="fact-content">
                        <p>Their front paws are incredibly sensitive, covered with thin, non-hairy skin that allows them to "feel" objects with extraordinary detail. They often 'wash' their food to enhance this tactile sense, not just for cleanliness!</p>
                    </div>
                    <span class="tap-to-reveal-text">Tap to Reveal!</span>
                </div>
                <div class="fact-card" onclick="toggleFact(this)">
                    <strong>The Signature Mask</strong>
                    <div class="fact-content">
                        <p>The distinctive black mask around their eyes isn't just for show! It helps reduce glare and enhances night vision, allowing them to see better in low light conditions ‚Äì perfect for nocturnal adventures.</p>
                    </div>
                    <span class="tap-to-reveal-text">Tap to Reveal!</span>
                </div>
                <div class="fact-card" onclick="toggleFact(this)">
                    <strong>Urban Acrobats</strong>
                    <div class="fact-content">
                        <p>From towering trees to bustling cityscapes, raccoons are masters of adaptation. Their agile bodies and clever minds allow them to thrive in diverse environments, even in your backyard!</p>
                    </div>
                    <span class="tap-to-reveal-text">Tap to Reveal!</span>
                </div>
                <div class="fact-card" onclick="toggleFact(this)">
                    <strong>Social & Playful Spirits</strong>
                    <div class="fact-content">
                        <p>While often solitary, female raccoons live in "fission-fusion" societies, sharing common territories with their relatives. They're also quite playful, especially when young!</p>
                    </div>
                    <span class="tap-to-reveal-text">Tap to Reveal!</span>
                </div>
                 <div class="fact-card" onclick="toggleFact(this)">
                    <strong>Sleepy Hollow Hideaways</strong>
                    <div class="fact-content">
                        <p>Raccoons don't truly hibernate, but they enter a state of torpor during harsh winter weather, sleeping for extended periods in cozy dens to conserve energy until spring arrives!</p>
                    </div>
                    <span class="tap-to-reveal-text">Tap to Reveal!</span>
                </div>
            </div>
        </section>

        <section class="joke-section" id="jokeSection">
            <h3>A Whisper from the Woods (and a Giggle!)</h3>
            <p id="joke"><em>"Why don't raccoons ever get caught? Because they always mask their tracks!"</em></p>
            <button onclick="getAnotherJoke(event)">
                <svg class="icon-custom" viewBox="0 0 24 24"><path d="M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"/></svg> Dig Up Another!
            </button>
        </section>
    </main>

    <footer>
        <p>Raccoon Reverie | A Digital Den of Delight</p>
    </footer>

    <script>
        function raccoonHeaderWiggle() {
            const headerH1 = document.querySelector('header h1');
            headerH1.style.animation = 'none';
            void headerH1.offsetWidth;
            headerH1.style.animation = 'headerWiggle 0.5s ease-in-out';
            setTimeout(() => {
                 headerH1.style.animation = '';
            }, 500);
        }

        const jokes = [
            "Why don't raccoons ever get caught? Because they always mask their tracks!",
            "Why did the raccoon cross the road? To get to the dumpster on the other side!",
            "What's a raccoon's favorite type of music? Trash metal!",
            "How does a raccoon propose? With a 'trash-ure' ring?",
            "What do you call a happy raccoon? A jolly-good fellow!",
            "Why are raccoons great at poker? Because they always have a good poker face!",
            "What do you call a raccoon in a fancy suit? A trash-tie affair!",
            "Why did the raccoon bring a ladder to the party? He heard the drinks were on the house!"
        ];

        let lastJokeIndex = -1;

        function getAnotherJoke(event) {
            let randomIndex;
            do {
                randomIndex = Math.floor(Math.random() * jokes.length);
            } while (randomIndex === lastJokeIndex);
            lastJokeIndex = randomIndex;

            const jokeText = document.getElementById('joke');
            const section = document.getElementById('jokeSection');

            jokeText.classList.add('fade-out');
            setTimeout(() => {
                jokeText.innerHTML = `<em>"${jokes[randomIndex]}"</em>`;
                jokeText.classList.remove('fade-out');
                jokeText.classList.add('fade-in');
                setTimeout(() => jokeText.classList.remove('fade-in'), 300);
            }, 300);

            for (let i = 0; i < 7; i++) {
                const sparkle = document.createElement('div');
                sparkle.classList.add('sparkle');
                const size = Math.random() * 20 + 10;
                sparkle.style.width = `${size}px`;
                sparkle.style.height = `${size}px`;
                sparkle.style.left = `${event.clientX - section.getBoundingClientRect().left + (Math.random() - 0.5) * 80}px`;
                sparkle.style.top = `${event.clientY - section.getBoundingClientRect().top + (Math.random() - 0.5) * 80}px`;
                section.appendChild(sparkle);
                setTimeout(() => sparkle.remove(), 900);
            }

            for (let i = 0; i < 15; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                confetti.style.left = `${event.clientX - section.getBoundingClientRect().left + (Math.random() - 0.5) * 150}px`;
                confetti.style.top = `${event.clientY - section.getBoundingClientRect().top + (Math.random() - 0.5) * 100}px`;
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 70%, 60%)`;
                confetti.style.animationDelay = `${Math.random() * 0.5}s`;
                section.appendChild(confetti);
                setTimeout(() => confetti.remove(), 2000);
            }
        }

        function toggleTheme(e) {
            const body = document.body;
            const toggleBtn = document.getElementById('themeToggle');
            const circle = document.getElementById('themeCircle');

            circle.style.backgroundColor = body.classList.contains('dark') ? 'var(--primary-light)' : 'var(--primary-dark)';

            const x = e.clientX || window.innerWidth / 2;
            const y = e.clientY || window.innerHeight / 2;

            circle.style.left = `${x}px`;
            circle.style.top = `${y}px`;

            body.classList.add('animating');

            setTimeout(() => {
                body.classList.toggle('dark');
                toggleBtn.innerHTML = body.classList.contains('dark') ? '‚òÄÔ∏è<span class="sr-only">Light mode</span>' : 'üåô<span class="sr-only">Dark mode</span>';
                localStorage.setItem('theme', body.classList.contains('dark') ? 'dark' : 'light');
            }, 350);

            setTimeout(() => {
                body.classList.remove('animating');
                circle.style.width = '0';
                circle.style.height = '0';
            }, 700);

            updateAmbientParticles();
        }

        function applyStoredTheme() {
            const savedTheme = localStorage.getItem('theme');
            const toggleBtn = document.getElementById('themeToggle');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark');
                toggleBtn.innerHTML = '‚òÄÔ∏è<span class="sr-only">Light mode</span>';
            } else {
                document.body.classList.remove('dark');
                toggleBtn.innerHTML = 'üåô<span class="sr-only">Dark mode</span>';
            }
            updateAmbientParticles();
        }

        window.onload = applyStoredTheme;

        window.addEventListener('scroll', () => {
            const totalHeight = document.documentElement.scrollHeight - window.innerHeight;
            const scrollPosition = window.scrollY;
            const progress = (scrollPosition / totalHeight) * 100;
            document.getElementById('scroll-progress').style.width = `${progress}%`;
        });

        function updateAmbientParticles() {
            const body = document.body;
            const heroSection = document.querySelector('.hero');

            heroSection.querySelectorAll('.ambient-particle').forEach(el => el.remove());

            if (body.classList.contains('dark')) {
                for (let i = 0; i < 20; i++) {
                    const star = document.createElement('div');
                    star.classList.add('ambient-particle', 'twinkle-star');
                    star.style.width = `${Math.random() * 8 + 4}px`;
                    star.style.height = star.style.width;
                    star.style.left = `${Math.random() * 100}%`;
                    star.style.top = `${Math.random() * 100}%`;
                    star.style.animationDelay = `${Math.random() * 3}s`;
                    star.style.animationDuration = `${Math.random() * 2 + 2}s`;
                    heroSection.appendChild(star);
                    star.style.opacity = 0;
                }
            } else {
                for (let i = 0; i < 30; i++) {
                    const mote = document.createElement('div');
                    mote.classList.add('ambient-particle', 'dust-mote');
                    const size = Math.random() * 6 + 2;
                    mote.style.width = `${size}px`;
                    mote.style.height = `${size}px`;
                    mote.style.left = `${Math.random() * 100}%`;
                    mote.style.top = `-${Math.random() * 20}%`;
                    mote.style.setProperty('--x-start', `${Math.random() * 100 - 50}px`);
                    mote.style.setProperty('--x-end', `${Math.random() * 100 - 50}px`);
                    mote.style.animationDelay = `${Math.random() * 8}s`;
                    mote.style.animationDuration = `${Math.random() * 7 + 7}s`;
                    heroSection.appendChild(mote);
                    mote.style.opacity = 0;
                }
            }
        }

        document.addEventListener('DOMContentLoaded', updateAmbientParticles);

        function toggleFact(card) {
            card.classList.toggle('revealed');
            const content = card.querySelector('.fact-content');
            const tapText = card.querySelector('.tap-to-reveal-text');

            if (card.classList.contains('revealed')) {
                content.style.height = content.scrollHeight + 'px';
            } else {
                content.style.height = '0';
            }
        }
    </script>
</body>
</html>
